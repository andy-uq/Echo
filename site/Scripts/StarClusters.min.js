var Vector=function(){function n(n,t){this.x=n,this.y=t}return n.prototype.toString=function(){return"("+this.x+", "+this.y+")"},n}(),StarCluster=function(){function n(n){n!=null&&(this.id=n.id,this.name=n.name,this.localCoordinates=n.localCoordinates)}return n.prototype.size=function(){return"N/A"},n}(),VectorViewModel=function(){function n(n){this.vector=n;var t=this;t.x=ko.observable(0),t.y=ko.observable(0)}return n.prototype.reset=function(){this.x(0),this.y(0)},n.prototype.save=function(){return new Vector(this.x(),this.y())},n}(),StarClusterViewModel=function(){function n(n){this.id=n.id,this.name=ko.observable(n.name),this.localCoordinates=ko.observable(new VectorViewModel(n.localCoordinates))}return n.prototype.save=function(){return new StarCluster({id:this.id,name:this.name(),localCoordinates:this.localCoordinates().save()})},n.prototype.update=function(){var n=this.save();ko.postbox.publish("starcluster.update",n)},n.prototype.add=function(){var n=this.save();ko.postbox.publish("starcluster.new",n),this.reset()},n.prototype.reset=function(){this.name(""),this.localCoordinates().reset()},n}(),StarClusterIndexViewModel=function(){function n(n){var t=this,i;this.data=ko.observableArray();for(i in n)this.data.push(new StarCluster(n[i]));this.newStarCluster=ko.observable(new StarClusterViewModel(new StarCluster(null))),this.editStarCluster=ko.observable(),this.remove=function(n){var i=t.editStarCluster();i&&i.id==n.id&&t.resetEdit(),t.data.remove(n)},this.edit=function(n){t.newStarCluster(null),t.editStarCluster(new StarClusterViewModel(n))},ko.postbox.subscribe("starcluster.new",function(n){t.new(n)}),ko.postbox.subscribe("starcluster.update",function(n){t.update(n)})}return n.prototype.remove=function(){},n.prototype.edit=function(){},n.prototype.new=function(n){n.id="starClusters/2",this.data.push(n)},n.prototype.find=function(n){for(var i,t=0;t<this.data().length;t++)if(i=this.data()[t],i.id==n)return i;return null},n.prototype.update=function(n){var t=this.find(n.id);this.data.replace(t,n),this.resetEdit()},n.prototype.resetEdit=function(){this.editStarCluster(null),this.newStarCluster(new StarClusterViewModel(new StarCluster(null)))},n}();$(function(){ko.applyBindings(new StarClusterIndexViewModel(starClusters))})